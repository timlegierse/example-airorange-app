name: Push Design System Data
run-name: Push design system adoption data to zeroheight 📈
on: [push]
jobs:
  analyze:
    runs-on: ubuntu-latest
    steps:
      - name: Authenticate
        run: |
          echo "🔐 Setting up authentication with zeroheight"
          npx @zeroheight/adoption-cli auth --client ${{ secrets.ZEROHEIGHT_CLIENT_ID }} --token ${{ secrets.ZEROHEIGHT_ACCESS_TOKEN }}
      - name: Analyze
        run: |
          echo "📈 Analyzing adoption data and pushing to zeroheight"
          npx @zeroheight/adoption-cli analyze --interactive false
      - name: Complete
        run: echo "💫 Component adoption update complete"
